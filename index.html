<!DOCTYPE html>
<html>
  <head>
    <title>A-Frame AR Camera Background</title>
    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
    <style>
      body { margin: 0; }
      .camera-video {
        position: fixed;
        width: 100%;
        height: 100%;
        object-fit: cover; /* Ensures video covers the whole screen */
        z-index: -1; /* Place the video behind the A-Frame scene */
      }
    </style>
  </head>
  <body>
    <!-- 1. Video element to display the camera stream -->
    <video id="camera--view" class="camera-video" autoplay playsinline></video>

    <!-- 2. A-Frame scene with a transparent background -->
    <a-scene background="color: transparent">
      <!-- Add 3D objects that will appear overlaid on the camera feed -->
      <a-box position="0 1.6 -3" rotation="0 45 0" color="#4CC3D9"></a-box>
    </a-scene>

    <script>
      // JavaScript to access the user's camera and stream it to the video element
      const cameraView = document.querySelector("#camera--view");
      const constraints = { video: { facingMode: "environment" }, audio: false }; // Use "user" for selfie camera

      function cameraStart() {
        navigator.mediaDevices
          .getUserMedia(constraints)
          .then(function(stream) {
            cameraView.srcObject = stream;
          })
          .catch(function(error) {
            console.error("Oops. Something is broken.", error);
          });
      }

      // Start the camera when the window loads
      window.addEventListener("load", cameraStart, false);
    </script>
  </body>
</html>
